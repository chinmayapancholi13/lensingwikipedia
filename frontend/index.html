<!DOCTYPE html>
<html>
	<head>
		<title>Lensing Wikipedia</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css">
		<link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap-responsive.min.css">
		<link rel="stylesheet" type="text/css" href="loadingindicator.css">
		<link rel="stylesheet" type="text/css" href="constraintslist.css">
		<link rel="stylesheet" type="text/css" href="eventdescriptionslist.css">
		<link rel="stylesheet" type="text/css" href="facet.css">
		<link rel="stylesheet" type="text/css" href="main.css">
	</head>
	<body>
		<div class="sidebar"></div>
		<div class="selectorsarea">
			<div class="facets"></div>
		</div>
<!--
		<div class="facet allargs"></div>
		<div class="facet arg0"></div>
		<div class="facet arg1"></div>
-->
		<!-- TODO: message on no javascript -->

		<!-- TODO: change to local js files for libraries -->
		<script src="http://code.jquery.com/jquery.js"></script>
		<script src="bootstrap/js/bootstrap.min.js"></script>

		<script src="config.js"></script>
		<script src="queries.js"></script>

		<script src="loadingindicator.js"></script>
		<script src="constraintslist.js"></script>
		<script src="eventdescriptionslist.js"></script>
		<script src="facet.js"></script>

		<script src="sidebar.js"></script>
		<script src="facets.js"></script>

		<script>
			function setupFitVisTabs() {
				var tabBarHeight = 75;
				function fitVisTabs() {
					var height = $(window).height() - tabBarHeight;
					$(".viscontent").css("height", height);
				}
				$(window).bind('doneResize', function() {
					fitVisTabs();
				});
				$(window).bind("ready", function() {
					fitVisTabs();
				});
			}

			var globalQuery = new Query(backendUrl);
			setupSidebar($(".sidebar"), globalQuery);

			var facets = [
				function(container) {
					setupFacet(container, globalQuery, "Role (any arg)", {
						type: 'countbyrole'
					}, function makeConstraint(role) {
						return {
							type: 'role',
							role: role
						}
					});
				},
				function(container) {
					setupFacet(container, globalQuery, "Role (arg 0)", {
						type: 'countbyrole',
						arg: 0
					}, function makeConstraint(role) {
						return {
							type: 'role',
							arg: 0,
							role: role
						}
					});
				},
				function(container) {
					setupFacet(container, globalQuery, "Role (arg 1)", {
						type: 'countbyrole',
						arg: 1
					}, function makeConstraint(role) {
						return {
							type: 'role',
							arg: 1,
							role: role
						}
					});
				},
			];
			setupFacets($(".facets"), globalQuery, facets);
			globalQuery.update();
		</script>
	</body>
</html>
