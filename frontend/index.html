<!DOCTYPE html>
<html>
	<head>
		<title>Lensing Wikipedia</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css">
		<link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap-responsive.min.css">
		<link rel="stylesheet" type="text/css" href="loadingindicator.css">
		<link rel="stylesheet" type="text/css" href="constraintslist.css">
		<link rel="stylesheet" type="text/css" href="eventdescriptionslist.css">
		<link rel="stylesheet" type="text/css" href="facet.css">
		<link rel="stylesheet" type="text/css" href="main.css">
	</head>
	<body>
		<div class="header">
			Lensing Wikipedia by <a href="http://natlang.cs.sfu.ca">SFU Natlang Lab</a>
		</div>
		<div class="contentarea">
			<div class="sidebar">
				<div class="constraintslistbox"></div>
				<div class="eventdescriptionslistbox"></div>
			</div>
			<div class="selectorsarea">
				<div class="facets"></div>
			</div>
		</div>
		<!-- TODO: message on no javascript -->

		<!-- TODO: change to local js files for libraries -->
		<script src="http://code.jquery.com/jquery.js"></script>
		<script src="bootstrap/js/bootstrap.min.js"></script>

		<script src="config.js"></script>
		<script src="queries.js"></script>

		<script src="layoututils.js"></script>

		<script src="loadingindicator.js"></script>
		<script src="constraintslist.js"></script>
		<script src="eventdescriptionslist.js"></script>
		<script src="facet.js"></script>

		<script>
			setupPanelled($('body'), $('.header'), $('.contentarea'), 'vertical', 4);

			function setupSidebar(container, globalQuery) {
				var cnstrBoxElt = $(".constraintslistbox");
				var eventDescBoxElt = $(".eventdescriptionslistbox");

				setupConstraintList(cnstrBoxElt, globalQuery);
				setupEventDescriptionsList(eventDescBoxElt, globalQuery);

				setupPanelled(container, cnstrBoxElt, eventDescBoxElt, 'vertical', 0, true);
			}

			var globalQuery = new Query(backendUrl);
			setupSidebar($(".sidebar"), globalQuery);

			var facets = [
				function(container) {
					setupFacet(container, globalQuery, "Role (any arg)", {
						type: 'countbyrole'
					}, function makeConstraint(role) {
						return {
							type: 'role',
							role: role
						}
					});
				},
				function(container) {
					setupFacet(container, globalQuery, "Role (arg 0)", {
						type: 'countbyrole',
						arg: 0
					}, function makeConstraint(role) {
						return {
							type: 'role',
							arg: 0,
							role: role
						}
					});
				},
				function(container) {
					setupFacet(container, globalQuery, "Role (arg 1)", {
						type: 'countbyrole',
						arg: 1
					}, function makeConstraint(role) {
						return {
							type: 'role',
							arg: 1,
							role: role
						}
					});
				},
			];
			setupSplitMakeElements($(".facets"), 'horizontal', facets);
			globalQuery.update();
		</script>
	</body>
</html>
